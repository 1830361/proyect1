if (self.CavalryLogger) { CavalryLogger.start_js(["2HlF3"]); }

__d("FeedComposerIDStore",["Arbiter","ReactComposerEvents","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_composerID:null,_subscriptions:b("SubscriptionsHandler"),set:function(a){this._subscriptions=new(b("SubscriptionsHandler"))(),this._composerID=a,this._subscribeComposerResetEvent()},get:function(){if(!this._composerID)throw new Error("ID Store has not yet been initialized via set()");return this._composerID},_subscribeComposerResetEvent:function(){var a=this;if(!this._composerID)throw new Error("Composer ID cannot be null");var c=b("Arbiter").subscribeOnce(b("ReactComposerEvents").COMPOSER_RESET+this._composerID,function(b,c){c&&c.newComposerID&&(a._composerID=c.newComposerID,a._subscribeComposerResetEvent())});this._subscriptions.addSubscriptions(c)}};e.exports=a}),null);
__d("ReactComposerFocusHandleScrollAway",["Event","getActiveElement","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=-400,h=300;a={handler:function(a,c){var d=b("Event").listen(window,"scroll",b("throttle")(function(){var e=a.getBoundingClientRect().bottom;if(e<g){c();e=b("getActiveElement")();e&&e.blur();d.remove()}},h))}};e.exports=a}),null);
__d("ReactComposerFocusWrapperCore.react",["ix","cssVar","cx","fbt","Arbiter","Bootloader","CurrentUser","DOM","DOMTraverser","Event","Focus","Image.react","Keys","Link.react","React","ReactComponentWithPureRenderMixin","ReactComposerEvents","ReactComposerFocusActions","ReactComposerMediaUploadType","ReactDOM","Run","ShimButton.react","SubscriptionsHandler","TabbableElements","TabIsolation","TrackingNodes","URI","fbglyph","ifRequired","isKeyActivation","ReactComposerFocusStore"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a=b("React").PropTypes;b("ReactComposerFocusStore");var k=parseInt("10px",10);c=b("React").createClass({displayName:"ReactComposerFocusWrapperCore",_composerID:"",_fixedHeight:0,_subscriptions:b("SubscriptionsHandler"),_firstFocus:!0,_onLeaveHandle:null,_root:null,_tabIsolation:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{composerID:a.string.isRequired,ariaLabel:a.string,onDismiss:a.func.isRequired,onFocus:a.func.isRequired,focused:a.bool.isRequired,gks:a.object,onFirstFocus:a.func,fixHeight:a.bool,ReactComposerFocusExtraConfigData:a.object},getDefaultProps:function(){return{focused:!1,fixHeight:!1}},UNSAFE_componentWillMount:function(){this._composerID=this.props.composerID},UNSAFE_componentWillReceiveProps:function(a){if(this.props.fixHeight&&!this.props.focused&&a.focused){a=b("ReactDOM").findDOMNode(this.refs.container);this._fixedHeight=a.offsetHeight+k}},componentDidMount:function(){this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscribeComposerEvents(),this._onLeaveHandle=b("Run").onLeave(this._onLeave),this._root&&(this._tabIsolation=new(b("TabIsolation"))(this._root),this.props.focused&&this._tabIsolation.enable())},componentDidUpdate:function(a){if(!a.focused&&this.props.focused){try{var c=document.createEvent("HTMLEvents");c.initEvent&&(c.initEvent("resize",!0,!1),window.dispatchEvent(new(b("Event"))("resize")))}catch(a){}this._tabIsolation&&this._tabIsolation.enable()}else a.focused&&!this.props.focused&&(this._tabIsolation&&this._tabIsolation.disable())},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),this._onLeave(),this._onLeaveHandle&&this._onLeaveHandle.remove(),this._tabIsolation&&this._tabIsolation.disable(),this._tabIsolation=null},render:function(){var a=this,c=this.props.fixHeight&&this.props.focused?{height:this._fixedHeight}:null,d=this.props.focused?this._renderDismissButton():null,e=this.props.focused?this._renderBugNub():null,f=this.props.label||j._("Crear una publicaci\u00f3n");return b("React").createElement("div",{role:this.props.focused?"dialog":"region","aria-label":f,className:(this.props.ReactComposerFocusExtraConfigData&&this.props.ReactComposerFocusExtraConfigData.removeDarkFocus?"_6apc":"")+" _3u13 _3e9r"+(this.props.focused?" _3u14":"")+(this.props.focused?" _1b3n":""),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.FEED_COMPOSER),ref:function(b){a._root=b},style:c,onKeyDown:this._onKeyDown},b("React").createElement("div",{className:"_3u15",onClick:this._onDismiss,role:"presentation"}),b("React").createElement("div",{className:"_3u16",ref:"container",onFocus:this._onFocus},this.props.children,d),e)},getComposerID:function(){return this._composerID},getComposer:function(){return this.refs.container},_renderDismissButton:function(){return b("React").createElement(b("ShimButton.react"),{className:"_3u17"+(this.props.gks&&this.props.gks.hasHeader?" _356d":"")+(this.props.gks&&this.props.gks.isSproutsComposer?" _3_fz":"")+(this.props.gks&&this.props.gks.wideHeader?" _37nh":"")+(this.props.gks&&this.props.gks.hideFocusDismissButton?" _1rbv":""),onClick:this._onClickDismissButton,onKeyDown:this._onDismissKeyDown,role:"button","aria-label":j._("Ignorar"),tabIndex:"0"},b("React").createElement(b("Image.react"),{src:g("125922")}))},_renderBugNub:function(){if(!b("CurrentUser").isEmployee())return null;var a=new(b("URI"))("/ajax/bugs/report");return b("React").createElement("div",{className:"_t95"},b("React").createElement(b("Link.react"),{href:"#",ajaxify:a,className:"_t97",rel:"dialog"}))},_subscribeComposerEvents:function(){var a=this,c=b("Arbiter").subscribe(b("ReactComposerEvents").OPTIMISTIC_POSTING_STARTED+this._composerID,function(){a.props.onDismiss(!0)}),d=b("Arbiter").subscribe(b("ReactComposerEvents").POST_SUCCEEDED+this._composerID,function(){a.props.onDismiss(!0)}),e=b("Arbiter").subscribe("ReactFeedComposerXBootloader/focuscomposer/"+this._composerID,function(){return a._onFocus(null)}),f=b("Arbiter").subscribe(b("ReactComposerEvents").COMPOSER_RESET+this._composerID,function(c,d){d&&d.newComposerID&&(a.props.onDismiss(),a._composerID=d.newComposerID,a._subscriptions.release(),a._subscriptions=new(b("SubscriptionsHandler"))(),a._subscribeComposerEvents())});this._subscriptions.addSubscriptions(c,d,e,f)},_onFocus:function(a){if(this.props.focused||a&&a.nativeEvent.composerPropagationStopped)return;this._firstFocus&&(this.props.onFirstFocus&&this.props.onFirstFocus(),this._firstFocus=!1);this.props.onFocus();b("ReactComposerFocusActions").notifyFocusAcquired(this.getComposerID())},_onKeyDown:function(a){a.keyCode===b("Keys").ESC&&!a.nativeEvent.composerPropagationStopped&&this._onDismiss()},_onDismissKeyDown:function(a){b("isKeyActivation")(a)&&this._onDismiss()},_onClickDismissButton:function(){var a=this;b("ifRequired")("ReactComposerMediaUploadStore",function(c){var d=c.getUploadsCount(a._composerID,b("ReactComposerMediaUploadType").VIDEO);c=c.getUploadsCount(a._composerID,b("ReactComposerMediaUploadType").PHOTO);d>0&&c===0&&b("Bootloader").loadModules(["ReactComposerVideoSurvey"],function(b){return b.showDismissalSurvey(a._composerID,d)},"ReactComposerFocusWrapperCore.react")});this._onDismiss()},_onDismiss:function(){var a=this;this._onLeave();if(this._root&&document.body){var c=b("DOMTraverser").nextFilteredNode(document.body,this._root,function(c){return!b("DOM").contains(a._root,c)&&b("TabbableElements").isTabbable(c)});b("Focus").set(c)}},_onLeave:function(){this.props.onDismiss(),b("ReactComposerFocusActions").notifyFocusLost(this.props.composerID)}});e.exports=c}),null);
__d("ReactComposerFocusInline.react",["Arbiter","React","ReactComposerFocusHandleScrollAway","ReactComposerFocusWrapperCore.react","ReactComposerTaggerType","ReactDOM","ifRequired"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={focused:!1},d.$3=function(){var a=b("ReactDOM").findDOMNode(d.refs.focus.getComposer());b("ReactComposerFocusHandleScrollAway").handler(a,d.$1);b("ifRequired")("ReactComposerActions",function(a){d.props.gks&&d.props.gks.lazySproutsExpand||a.expandSprouts(d.$2())});b("ifRequired")("ReactComposerGroupPostTagsTaggerActions",function(a){a.setShowState(d.$2(),!0)});b("ifRequired")("ReactComposerTaggerActions",function(a){a.handleSetTaggerShowNUX(d.$2(),b("ReactComposerTaggerType").GROUP_MEET_UP,!1),a.handleSetTaggerShowNUX(d.$2(),b("ReactComposerTaggerType").VISUAL_POLL,!1)});d.setState({focused:!0})},d.$1=function(){b("Arbiter").inform("ReactComposerFocus/collapse/"+d.$2()),window.setTimeout(function(){d.refs.focus&&(b("ifRequired")("ReactComposerFocusActions",function(a){a.notifyFocusLost(d.$2())}),b("ifRequired")("ReactComposerActions",function(a){a.collapseSprouts(d.$2())}),b("ifRequired")("ReactComposerGroupPostTagsTaggerActions",function(a){a.setShowState(d.$2(),!1)}),b("ifRequired")("ReactComposerTaggerActions",function(a){b("ifRequired")("ReactComposerLoggingName",function(b){a.deselectCurrentTagger(d.$2(),b.INLINE_COMPOSER)})}))},0),d.setState({focused:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$1()};d.componentDidMount=function(){b("Arbiter").inform("ReactComposerFocus/initialized"+this.$2())};d.render=function(){return b("React").createElement(b("ReactComposerFocusWrapperCore.react"),{composerID:this.props.composerID,focused:this.state.focused&&this.props.enableFocusBehavior,onFocus:this.$3,onDismiss:this.$1,gks:this.props.gks,ReactComposerFocusExtraConfigData:this.props.ReactComposerFocusExtraConfigData,ref:"focus"},this.props.children)};d.$2=function(){return this.refs.focus&&this.refs.focus.getComposerID()};return c}(b("React").PureComponent);c.propTypes={composerID:a.string.isRequired,gks:a.object};e.exports=c}),null);